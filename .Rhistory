library(RamEx)
library(dplyr)
data <- readRDS("E:\\RamEx datasets\\data_27W.rds")
plot(data)
data <- readRDS("E:\\RamEx datasets\\data_27W.rds")
data
table(data$group)
data@meta.data$group %<>% gsub('baumanii','ABA',.) %>% gsub('TB','MTB',.) %>% gsub('NTM','MAB',.)
table(data$group)
data$filenames[10]
saveRDS(data,"E:\\RamEx datasets\\data_27W.rds")
load("D:/Scientific research/海洋环境监测/Ocean_data.RData")
load("D:/Scientific research/海洋环境监测/Ocean_data.RData")
vade_all <- read.table("D:\\Scientific research\\海洋环境监测\\Ocean\\All_2\\epoch_349_gmm_labels.txt")
table(vade_all)
length(vade_all$V1)
mean.spec(data$data, factor(vade_all$V1), 0.0005)
library(RamEx)
mean.spec(data$data, factor(vade_all$V1), 0.0005)
mean.spec(data$data, factor(vade_all$V1), 0.005)
aa <- apply(data$data[,data@wavenumber>2700], 1, max)
aa <- aggregate(aa, list(vade_all$V1), mean)
row.names(aa) <- aa$Group.1
sort(t(aa)[2,])
vade_all$V1 %<>% factor(.,c(0,13,7,6,10,8,9,12,11,4,5,1,3,2))
library(magrittr)
vade_all$V1 %<>% factor(.,c(0,13,7,6,10,8,9,12,11,4,5,1,3,2))
mean.spec(data$data, factor(vade_all$V1), 0.005)
confusion.plot(paste(data$group, data$fix, data$collect), vade_all$V1)
table(paste(data$group, data$fix, data$collect))
confusion.plot(paste(data$group, data$fix, data$collect), vade_all$V1)
confusion.plot(data$group, vade_all$V1)
confusion.plot(paste(data$group, data$fix, data$collect), vade_all$V1)
data <- readRDS('E:\\RamEx datasets\\data_27W.rds')
table(data$group)
table(data$filenames[1])
data@datasets <- list(processed.data = data$normalized.data)
data@wavenumber
saveRDS(data,'E:\\RamEx datasets\\data_27W.rds')
colnames(data$processed.data)
?Intraramanome.Analysis.Irca.Global
setwd('RamEx')
library(devtools)
document()
rm(get.nearest.dataset())
rm(get.nearest.dataset)
rm(gpupre_spike_matrix)
rm(matrix2vector)
rm(Preprocessing.Spike)
document()
build()
library(RamEx)
library(dplyr)
data(RamEx_data)
RamEx_data <- RamEx_data %>% Preprocessing.Smooth.Sg %>% Preprocessing.Baseline.Polyfit %>% Preprocessing.Normalize(.,'ch')
plot(RamEx_data)
qc_icod <- Qualitycontrol.ICOD(RamEx_data)
data_cleaned <- RamEx_data[qc_icod$quality,]
plot(data_cleaned)
qc_mcd <- Qualitycontrol.Mcd(RamEx_data)
qc_t2 <- Qualitycontrol.T2(RamEx_data)
qc_dis <- Qualitycontrol.Dis(RamEx_data)
qc_snr <- Qualitycontrol.Snr(RamEx_data, 'easy')
data_cleaned <- Feature.Reduction.Intensity(data_cleaned, list(c(2000,2250),c(2750,3050), 1450, 1665))
# calculate CDR
CDR <- data.frame(data_cleaned@meta.data,
data_cleaned$`2000~2250`/(data_cleaned$`2000~2250` + data_cleaned$`2750~3050`))
data.reduction <- Feature.Reduction.Pca(data_cleaned) %>% Feature.Reduction.Pcoa %>% Feature.Reduction.Tsne %>% Feature.Reduction.Umap
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = TRUE, threshold = 0.6)
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = TRUE, threshold = 0.6)
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = TRUE, threshold = 0.6)
Raman.Markers.Roc()
?Raman.Markers.Roc()
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = F, threshold = 0.6)
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = F, threshold = 0.6)
Preprocessing.Cutoff(data_cleaned, 1400, 1500)
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1300, 1500), paired  = F, threshold = 0.6)
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = F, threshold = 0.6)
ROC_markers <- Raman.Markers.Roc(Preprocessing.Cutoff(data_cleaned, 1400, 1500), paired  = F, threshold = 0.6)
bands_ann <- data.frame(
Wave_num = c(742,850,872,971,997,1098,1293,1328,1426,1576,
824,883,1005,1033,1051,1237,1559,1651,
1076,1119,1370,2834,2866,2912),
Group = rep(c('Nucleic acid', 'Protein', 'Lipids'), times = c(10, 8, 6)) )
Intraramanome.Analysis.Irca.Local(data_cleaned, bands_ann = bands_ann)
IRCA.interests <- Intraramanome.Analysis.Irca.Global(data_cleaned)
remove.packages("RamEx")
